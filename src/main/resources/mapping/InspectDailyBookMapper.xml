<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.upc.dao.InspectDailyBookMapper">
  <resultMap id="BaseResultMap" type="com.example.upc.dataobject.InspectDailyBook">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 07 01:03:21 CST 2019.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="daily_food_id" jdbcType="INTEGER" property="dailyFoodId" />
    <result column="book_conf_id" jdbcType="INTEGER" property="bookConfId" />
    <result column="is_public" jdbcType="INTEGER" property="isPublic" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
    <result column="operate_time" jdbcType="TIMESTAMP" property="operateTime" />
    <result column="operate_ip" jdbcType="VARCHAR" property="operateIp" />
    <result column="operator" jdbcType="VARCHAR" property="operator" />
  </resultMap>
  <resultMap id="BookResultParam" type="com.example.upc.controller.param.InspectBookParam">
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="is_public" jdbcType="INTEGER" property="isPublic" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
    <result column="book_name" jdbcType="VARCHAR" property="bookName" />
    <result column="book_url" jdbcType="VARCHAR" property="bookUrl" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 07 01:03:21 CST 2019.
    -->
    id, daily_food_id, book_conf_id, is_public, remark, operate_time, operate_ip, operator
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 07 01:03:21 CST 2019.
    -->
    select 
    <include refid="Base_Column_List" />
    from inspect_daily_book
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 07 01:03:21 CST 2019.
    -->
    delete from inspect_daily_book
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.example.upc.dataobject.InspectDailyBook">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 07 01:03:21 CST 2019.
    -->
    insert into inspect_daily_book (id, daily_food_id, book_conf_id, 
      is_public, remark, operate_time, 
      operate_ip, operator)
    values (#{id,jdbcType=INTEGER}, #{dailyFoodId,jdbcType=INTEGER}, #{bookConfId,jdbcType=INTEGER}, 
      #{isPublic,jdbcType=INTEGER}, #{remark,jdbcType=VARCHAR}, #{operateTime,jdbcType=TIMESTAMP}, 
      #{operateIp,jdbcType=VARCHAR}, #{operator,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.example.upc.dataobject.InspectDailyBook">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 07 01:03:21 CST 2019.
    -->
    insert into inspect_daily_book
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="dailyFoodId != null">
        daily_food_id,
      </if>
      <if test="bookConfId != null">
        book_conf_id,
      </if>
      <if test="isPublic != null">
        is_public,
      </if>
      <if test="remark != null">
        remark,
      </if>
      <if test="operateTime != null">
        operate_time,
      </if>
      <if test="operateIp != null">
        operate_ip,
      </if>
      <if test="operator != null">
        operator,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="dailyFoodId != null">
        #{dailyFoodId,jdbcType=INTEGER},
      </if>
      <if test="bookConfId != null">
        #{bookConfId,jdbcType=INTEGER},
      </if>
      <if test="isPublic != null">
        #{isPublic,jdbcType=INTEGER},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="operateTime != null">
        #{operateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="operateIp != null">
        #{operateIp,jdbcType=VARCHAR},
      </if>
      <if test="operator != null">
        #{operator,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.example.upc.dataobject.InspectDailyBook">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 07 01:03:21 CST 2019.
    -->
    update inspect_daily_book
    <set>
      <if test="dailyFoodId != null">
        daily_food_id = #{dailyFoodId,jdbcType=INTEGER},
      </if>
      <if test="bookConfId != null">
        book_conf_id = #{bookConfId,jdbcType=INTEGER},
      </if>
      <if test="isPublic != null">
        is_public = #{isPublic,jdbcType=INTEGER},
      </if>
      <if test="remark != null">
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="operateTime != null">
        operate_time = #{operateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="operateIp != null">
        operate_ip = #{operateIp,jdbcType=VARCHAR},
      </if>
      <if test="operator != null">
        operator = #{operator,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.example.upc.dataobject.InspectDailyBook">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jul 07 01:03:21 CST 2019.
    -->
    update inspect_daily_book
    set daily_food_id = #{dailyFoodId,jdbcType=INTEGER},
      book_conf_id = #{bookConfId,jdbcType=INTEGER},
      is_public = #{isPublic,jdbcType=INTEGER},
      remark = #{remark,jdbcType=VARCHAR},
      operate_time = #{operateTime,jdbcType=TIMESTAMP},
      operate_ip = #{operateIp,jdbcType=VARCHAR},
      operator = #{operator,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>

  <insert id="batchInsert" parameterType="map">
    insert into inspect_daily_book (daily_food_id, book_conf_id,is_public, remark,operator, operate_time, operate_ip)
    values
    <foreach collection="dailyBookList" item="dailyBook" separator=",">
      ( #{dailyBook.dailyFoodId}, #{dailyBook.bookConfId}, #{dailyBook.isPublic}, #{dailyBook.remark}, #{dailyBook.operator}, #{dailyBook.operateTime}, #{dailyBook.operateIp})
    </foreach>
  </insert>

  <select id="getByDailyFoodId" resultMap="BookResultParam">
    SELECT a.id,a.is_public,a.remark,b.book_name,b.book_url
    FROM inspect_daily_book as a LEFT JOIN inspect_book_conf as b on a.book_conf_id = b.id
    WHERE daily_food_id = #{dailyFoodId}
  </select>

  <delete id="deleteByDailyFoodId" parameterType="java.lang.Integer">
    delete from inspect_daily_book
    where daily_food_id = #{dailyFoodId}
  </delete>

  <update id="changeBookRemark" parameterType="map">
    update inspect_daily_book
    set remark = #{remark,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>

  <resultMap id="NameParam" type="com.example.upc.controller.param.NameParam">
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="number" jdbcType="VARCHAR" property="name" />
  </resultMap>

  <select id="getNameListByList" resultMap="NameParam">
    SELECT b.book_number as number,a.id as id FROM
          (SELECT a.id FROM inspect_daily_book as a INNER JOIN inspect_book_conf as b on a.book_conf_id = b.id
               WHERE a.daily_food_id=#{dailyFoodId} AND b.book_url = '/detailList') as a LEFT JOIN inspect_place_financial_list as b on a.id = b.parent_id
  </select>

  <select id="getNameListByForce" resultMap="NameParam">
    SELECT b.force_number as number,a.id as id  FROM
      (SELECT a.id FROM inspect_daily_book as a INNER JOIN inspect_book_conf as b on a.book_conf_id = b.id
       WHERE a.daily_food_id=#{dailyFoodId} AND b.book_url = '/compulsoryMeasure') as a LEFT JOIN inspect_force_decision as b on a.id = b.parent_id
  </select>

</mapper>