<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.upc.dao.SupervisionGaMapper">
  <resultMap id="BaseResultMap" type="com.example.upc.dataobject.SupervisionGa">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 22 18:27:22 CST 2019.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="unit_name" jdbcType="VARCHAR" property="unitName" />
    <result column="department" jdbcType="INTEGER" property="department" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="sexy" jdbcType="INTEGER" property="sexy" />
    <result column="job" jdbcType="INTEGER" property="job" />
    <result column="type" jdbcType="INTEGER" property="type" />
    <result column="id_number" jdbcType="VARCHAR" property="idNumber" />
    <result column="enforce" jdbcType="VARCHAR" property="enforce" />
    <result column="mobile_phone" jdbcType="VARCHAR" property="mobilePhone" />
    <result column="office_phone" jdbcType="VARCHAR" property="officePhone" />
    <result column="number" jdbcType="INTEGER" property="number" />
    <result column="work_phone" jdbcType="VARCHAR" property="workPhone" />
    <result column="category" jdbcType="VARCHAR" property="category" />
    <result column="photo" jdbcType="VARCHAR" property="photo" />
    <result column="is_stop" jdbcType="INTEGER" property="isStop" />
    <result column="operator" jdbcType="VARCHAR" property="operator" />
    <result column="operator_ip" jdbcType="VARCHAR" property="operatorIp" />
    <result column="operator_time" jdbcType="TIMESTAMP" property="operatorTime" />
  </resultMap>

  <resultMap extends="BaseResultMap" id="ResultMapParam" type="com.example.upc.controller.param.ComplaintLeaderParam">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 29 10:58:28 CST 2019.
    -->
    <result column="dept_name" jdbcType="VARCHAR" property="deptName" />
  </resultMap>

  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 22 18:27:22 CST 2019.
    -->
    id, unit_name, department, name, sexy, job, type, id_number, enforce, mobile_phone, 
    office_phone, number, work_phone, category, photo, is_stop, operator, operator_ip, 
    operator_time
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 22 18:27:22 CST 2019.
    -->
    select 
    <include refid="Base_Column_List" />
    from supervision_ga
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 22 18:27:22 CST 2019.
    -->
    delete from supervision_ga
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.example.upc.dataobject.SupervisionGa">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 22 18:27:22 CST 2019.
    -->
    insert into supervision_ga (id, unit_name, department, 
      name, sexy, job, type, 
      id_number, enforce, mobile_phone, 
      office_phone, number, work_phone, 
      category, photo, is_stop, 
      operator, operator_ip, operator_time
      )
    values (#{id,jdbcType=INTEGER}, #{unitName,jdbcType=VARCHAR}, #{department,jdbcType=INTEGER}, 
      #{name,jdbcType=VARCHAR}, #{sexy,jdbcType=INTEGER}, #{job,jdbcType=INTEGER}, #{type,jdbcType=INTEGER}, 
      #{idNumber,jdbcType=VARCHAR}, #{enforce,jdbcType=VARCHAR}, #{mobilePhone,jdbcType=VARCHAR}, 
      #{officePhone,jdbcType=VARCHAR}, #{number,jdbcType=INTEGER}, #{workPhone,jdbcType=VARCHAR}, 
      #{category,jdbcType=VARCHAR}, #{photo,jdbcType=VARCHAR}, #{isStop,jdbcType=INTEGER}, 
      #{operator,jdbcType=VARCHAR}, #{operatorIp,jdbcType=VARCHAR}, #{operatorTime,jdbcType=TIMESTAMP}
      )
  </insert>
  <insert id="insertSelective" useGeneratedKeys="true" keyProperty="id" keyColumn="id" parameterType="com.example.upc.dataobject.SupervisionGa">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 22 18:27:22 CST 2019.
    -->
    insert into supervision_ga
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="unitName != null">
        unit_name,
      </if>
      <if test="department != null">
        department,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="sexy != null">
        sexy,
      </if>
      <if test="job != null">
        job,
      </if>
      <if test="type != null">
        type,
      </if>
      <if test="idNumber != null">
        id_number,
      </if>
      <if test="enforce != null">
        enforce,
      </if>
      <if test="mobilePhone != null">
        mobile_phone,
      </if>
      <if test="officePhone != null">
        office_phone,
      </if>
      <if test="number != null">
        number,
      </if>
      <if test="workPhone != null">
        work_phone,
      </if>
      <if test="category != null">
        category,
      </if>
      <if test="photo != null">
        photo,
      </if>
      <if test="isStop != null">
        is_stop,
      </if>
      <if test="operator != null">
        operator,
      </if>
      <if test="operatorIp != null">
        operator_ip,
      </if>
      <if test="operatorTime != null">
        operator_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="unitName != null">
        #{unitName,jdbcType=VARCHAR},
      </if>
      <if test="department != null">
        #{department,jdbcType=INTEGER},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="sexy != null">
        #{sexy,jdbcType=INTEGER},
      </if>
      <if test="job != null">
        #{job,jdbcType=INTEGER},
      </if>
      <if test="type != null">
        #{type,jdbcType=INTEGER},
      </if>
      <if test="idNumber != null">
        #{idNumber,jdbcType=VARCHAR},
      </if>
      <if test="enforce != null">
        #{enforce,jdbcType=VARCHAR},
      </if>
      <if test="mobilePhone != null">
        #{mobilePhone,jdbcType=VARCHAR},
      </if>
      <if test="officePhone != null">
        #{officePhone,jdbcType=VARCHAR},
      </if>
      <if test="number != null">
        #{number,jdbcType=INTEGER},
      </if>
      <if test="workPhone != null">
        #{workPhone,jdbcType=VARCHAR},
      </if>
      <if test="category != null">
        #{category,jdbcType=VARCHAR},
      </if>
      <if test="photo != null">
        #{photo,jdbcType=VARCHAR},
      </if>
      <if test="isStop != null">
        #{isStop,jdbcType=INTEGER},
      </if>
      <if test="operator != null">
        #{operator,jdbcType=VARCHAR},
      </if>
      <if test="operatorIp != null">
        #{operatorIp,jdbcType=VARCHAR},
      </if>
      <if test="operatorTime != null">
        #{operatorTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.example.upc.dataobject.SupervisionGa">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 22 18:27:22 CST 2019.
    -->
    update supervision_ga
    <set>
      <if test="unitName != null">
        unit_name = #{unitName,jdbcType=VARCHAR},
      </if>
      <if test="department != null">
        department = #{department,jdbcType=INTEGER},
      </if>
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="sexy != null">
        sexy = #{sexy,jdbcType=INTEGER},
      </if>
      <if test="job != null">
        job = #{job,jdbcType=INTEGER},
      </if>
      <if test="type != null">
        type = #{type,jdbcType=INTEGER},
      </if>
      <if test="idNumber != null">
        id_number = #{idNumber,jdbcType=VARCHAR},
      </if>
      <if test="enforce != null">
        enforce = #{enforce,jdbcType=VARCHAR},
      </if>
      <if test="mobilePhone != null">
        mobile_phone = #{mobilePhone,jdbcType=VARCHAR},
      </if>
      <if test="officePhone != null">
        office_phone = #{officePhone,jdbcType=VARCHAR},
      </if>
      <if test="number != null">
        number = #{number,jdbcType=INTEGER},
      </if>
      <if test="workPhone != null">
        work_phone = #{workPhone,jdbcType=VARCHAR},
      </if>
      <if test="category != null">
        category = #{category,jdbcType=VARCHAR},
      </if>
      <if test="photo != null">
        photo = #{photo,jdbcType=VARCHAR},
      </if>
      <if test="isStop != null">
        is_stop = #{isStop,jdbcType=INTEGER},
      </if>
      <if test="operator != null">
        operator = #{operator,jdbcType=VARCHAR},
      </if>
      <if test="operatorIp != null">
        operator_ip = #{operatorIp,jdbcType=VARCHAR},
      </if>
      <if test="operatorTime != null">
        operator_time = #{operatorTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.example.upc.dataobject.SupervisionGa">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 22 18:27:22 CST 2019.
    -->
    update supervision_ga
    set unit_name = #{unitName,jdbcType=VARCHAR},
      department = #{department,jdbcType=INTEGER},
      name = #{name,jdbcType=VARCHAR},
      sexy = #{sexy,jdbcType=INTEGER},
      job = #{job,jdbcType=INTEGER},
      type = #{type,jdbcType=INTEGER},
      id_number = #{idNumber,jdbcType=VARCHAR},
      enforce = #{enforce,jdbcType=VARCHAR},
      mobile_phone = #{mobilePhone,jdbcType=VARCHAR},
      office_phone = #{officePhone,jdbcType=VARCHAR},
      number = #{number,jdbcType=INTEGER},
      work_phone = #{workPhone,jdbcType=VARCHAR},
      category = #{category,jdbcType=VARCHAR},
      photo = #{photo,jdbcType=VARCHAR},
      is_stop = #{isStop,jdbcType=INTEGER},
      operator = #{operator,jdbcType=VARCHAR},
      operator_ip = #{operatorIp,jdbcType=VARCHAR},
      operator_time = #{operatorTime,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=INTEGER}
  </update>

  <select id="countByTelephone" parameterType="map" resultType="int">
    SELECT count(1)
    FROM supervision_ga
    WHERE mobile_phone = #{mobilePhone}
    <if test="id != null">
      AND id != #{id}
    </if>
  </select>

  <delete id="batchDelete" parameterType="map">
    delete from supervision_ga where id in
    <foreach collection="gaIds" item="gaId" index="no" open="(" separator="," close=")">
      #{gaId}
    </foreach>
  </delete>

  <select id="countList" resultType="int">
    SELECT count(1)
    FROM supervision_ga
    WHERE 1=1
    <if test="gaParam.department != null">
      AND department IN <foreach collection="gaParam.department" item="dept" open="(" close=")" separator=",">#{dept}</foreach>
    </if>
    <if test="gaParam.unitName != null and gaParam.unitName != ''">AND unit_name = #{gaParam.unitName}</if>
    <if test="gaParam.job != null and gaParam.job != ''">AND job = #{gaParam.job}</if>
    <if test="gaParam.mobilePhone != null and gaParam.mobilePhone != ''">AND mobile_phone LIKE CONCAT('%',#{gaParam.mobilePhone},'%') </if>
    <if test="gaParam.name != null and gaParam.name != ''">AND name  LIKE CONCAT('%',#{gaParam.name},'%') </if>
  </select>

  <select id="getPage" resultMap="BaseResultMap">
    SELECT <include refid="Base_Column_List" />
    FROM supervision_ga
    WHERE 1=1
    <if test="gaParam.department != null">
        AND department IN <foreach collection="gaParam.department" item="dept" open="(" close=")" separator=",">#{dept}</foreach>
    </if>
    <if test="gaParam.unitName != null and gaParam.unitName != ''">AND unit_name = #{gaParam.unitName}</if>
    <if test="gaParam.job != null and gaParam.job != ''">AND job = #{gaParam.job}</if>
    <if test="gaParam.mobilePhone != null and gaParam.mobilePhone != ''">AND mobile_phone LIKE CONCAT('%',#{gaParam.mobilePhone},'%') </if>
    <if test="gaParam.name != null and gaParam.name != ''">AND name  LIKE CONCAT('%',#{gaParam.name},'%') </if>
    ORDER BY number
    limit #{page.offset}, #{page.pageSize}
  </select>

  <update id="changeStop">
    UPDATE supervision_ga SET is_stop = #{isStop} WHERE id = #{id}
  </update>

  <update id="changeDept">
    UPDATE supervision_ga SET department = #{checkDept} WHERE id = #{id}
  </update>

  <insert id="batchInsert" useGeneratedKeys="true" keyProperty="id" keyColumn="id" parameterType="map">
    insert into supervision_ga (id,unit_name, department, name,sexy,job,type,id_number,enforce,mobile_phone,
    office_phone,number,work_phone,is_stop,operator, operator_time, operator_ip)
    values
    <foreach collection="supervisionGaList" item="supervisionGa" separator=",">
      ( #{supervisionGa.id},#{supervisionGa.unitName}, #{supervisionGa.department},#{supervisionGa.name},#{supervisionGa.sexy},#{supervisionGa.job}
       ,#{supervisionGa.type},#{supervisionGa.idNumber},#{supervisionGa.enforce},#{supervisionGa.mobilePhone}
      ,#{supervisionGa.officePhone},#{supervisionGa.number},#{supervisionGa.workPhone},#{supervisionGa.isStop}
       ,#{supervisionGa.operator}, #{supervisionGa.operatorTime}, #{supervisionGa.operatorIp})
    </foreach>
  </insert>

  <select id="countListAllList" resultType="int">
    SELECT count(1)
    FROM (select a.*,b.name as dept_name from(SELECT * FROM supervision_ga) as a left join sys_dept as b on a.department = b.id) as a
    where 1=1
    <if test="search.unit != null and search.unit != ''">AND a.unit_name LIKE CONCAT('%',#{search.unit},'%')</if>
    <if test="search.name != null and search.name != ''">AND a.name LIKE CONCAT('%',#{search.name},'%')</if>
    <if test="search.dept != null and search.dept != ''">AND a.dept_name LIKE CONCAT('%',#{search.dept},'%')</if>
  </select>

  <select id="getPageAllList" resultMap="ResultMapParam">
    select *
    from (select a.*,b.name as dept_name from(SELECT * FROM supervision_ga) as a left join sys_dept as b on a.department = b.id) as a
    where 1=1
    <if test="search.unit != null and search.unit != ''">AND a.unit_name LIKE CONCAT('%',#{search.unit},'%')</if>
    <if test="search.name != null and search.name != ''">AND a.name LIKE CONCAT('%',#{search.name},'%')</if>
    <if test="search.dept != null and search.dept != ''">AND a.dept_name LIKE CONCAT('%',#{search.dept},'%')</if>
    limit #{page.offset}, #{page.pageSize}
  </select>

  <select id="countAll" resultType="int">
    SELECT count(1)
    FROM supervision_ga
  </select>

  <select id="countByDept" resultType="int">
    SELECT count(1)
    FROM supervision_ga
    WHERE department = #{deptId}
  </select>

  <select id="getAll" resultMap="BaseResultMap">
    SELECT <include refid="Base_Column_List" />
    FROM supervision_ga
  </select>

  <select id="getGaByAreaForMap" resultMap="BaseResultMap">
    select <include refid="Base_Column_List" />
    from supervision_ga as s
    where s.department in (
    SELECT b.id from sys_dept_area as a right join sys_dept as b
    on a.dept_id=b.id where b.type=2 and a.area_id = #{areaId})
  </select>
</mapper>